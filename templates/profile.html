<!DOCTYPE html "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<!--<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml"> 
-->
<head>
<script src="http://maps.google.com/maps/api/js?sensor=false">" type="text/javascript"></script>
<script type="text/javascript" src="/site_media/jquery.js"></script> 
<script type="text/javascript" src="/site_media/rssajax.js"></script> 
<script type="text/javascript" src="/site_media/jfeed.js"></script>
<script type="text/javascript" src="/site_media/profile1.js"></script>
<script>
//var openWindow;
//var maxlat = 0
//var maxlon = 0
//var minlat = 360
//var minlon = 360
//var mydata;
//function placeMarker(map, item, content, markerFunction){
	//var display = item.display;
	//var venueName = item.venue.name;
	//var lat = item.venue.geolat;
	//var lon = item.venue.geolong;
	//if (lat > maxlat) {  maxlat = lat;}
	//if (lat < minlat) { minlat = lat;}
//
	//if (lon > maxlon) { maxlon = lon;}
	//if (lon < minlon) { minlon = lon;}
//
	////Make a point and put it on the map
	//var point = new google.maps.LatLng(lat, lon);
	////toppoint = new google.maps.LatLng(maxlat, minlon)
	////bottompoint = new google.maps.LatLng(minlat, maxlon)
	////bounds = new google.maps.LatLngBounds(bottompoint, toppoint)
	////map.set_center(bounds.getCenter());
	//map.set_center(point);
	//var myOptions = {zoom:4, center:point,mapTypeId: google.maps.MapTypeId.ROADMAP,}
	//var marker = markerFunction(point, item);
//
	//google.maps.event.addListener(marker, 'click', function(){
		//if(openWindow != undefined){
			//openWindow.close()
		//}	
		//openWindow = infowindow
		//openWindow.open(map,marker);
		//
	//});
//
	//var shout = item.shout
	//if (shout == null){
		//shout = ''
	//}
	//var venueLink = 'http://playfoursquare.com/venue/'+item.venue.id
//
	//var infowindow = new google.maps.InfoWindow({
    	//content: content
	//});
//
//}

//function buildfriendFoursquareCheckinPopup(item){
	//var shout = item.shout
	//if (shout == null){
		//shout = ''
	//}
	////handles the absurd case in foursquare where someone shouts and doesn't checkin. Kinda pointless
	//if(item.venue == null){
		//var venueLink = ''
	//}
	//else{
		//var venueLink = 'http://playfoursquare.com/venue/'+item.venue.id
	//}
//
	//var ret = '<table><tr><td><a href=# onclick=getUser('+item.user.id+')><img src=\''
						//+item.user.photo+'\'</td>'
						//+'<td>'+item.user.firstname+' '
						//+item.user.lastname
						//+'</a><br>@<a href=\''
						//+venueLink+'\'>'
						//+item.venue.name+'</a><br><i>'
						//+shout+'</i> <img src=\'site_media/yelp.gif\'></td></tr></table>'
	//return ret
//}
//
//function buildSelfPopup(item){
	//var shout = item.shout
	//if (shout == null){
		//shout = ''
	//}
	//var venueLink = 'http://playfoursquare.com/venue/'+item.venue.id
	//var ret = '<table><tr><td>You were @<a href=\''
						//+venueLink+'\'>'
						//+item.venue.name+'</a><br><i>'
						//+shout+'</i> <img src=\'site_media/yelp.gif\'></td></tr></table>'
	//return ret
//}
//
//function getUser(uid){
	//$.getJSON("/getUser/?uid="+uid,
		//function(data){
			//a = eval("("+data+")");
			//}
		//);
//}

function putStuffInProfilePane(data){
	//Take stuff from data
	x = eval("("+data+")");
	var first = x.user.firstname
	var last = x.user.lastname
	var city = x.user.city.name
	var photo = x.user.photo
	var gender = x.user.gender
	var checkin_time = x.user.checkin.created
	if (x.user.checkin.venue == null){
		var venue = ''
		var venue_link = ''
		var venue_name = ''
	}
	else{
		var venue_link = 'http://playfoursquare.com/venue/'+venue
		var venue = x.user.checkin.venue.id
		var venue_name = x.user.checkin.venue.name
	}
	var shout = x.user.checkin.shout
	var rss = x.user.settings.feeds_key
	if (shout == null){ shout = ''; }
	var userInfo = document.getElementById('userinfo');

	//setup the new div
	var newdiv = document.createElement('div');
	newdiv.innerHTML = "<img src = "+photo+">"+shout
						+"<br><b>"+first+" "+ last +"</b><br><a href="
						+venue_link+">"+venue_name+"</a><br><font size=1> "
						+ checkin_time
						+"<br><a href=# onclick=loadMyCheckins('"+rss+"')>my checkins</a>"
						+"<br><a href=# onclick=loadMyTrips()>my trips</a>"
						//+"<br><a href=# onclick=getRSS('"+rss+"')>333my checkins</a>"
						+"</font>"
	userInfo.appendChild(newdiv);
}

//function getRSS(url){
	//jQuery.getFeed({
		//url:"http://feeds.playfoursquare.com/history/17f32ec6b65e8577d3ea14b0806fd42f.rss", 
		//success: function(feed){
			//alert(feed.title);
		//}
	//});
//}

//function myMarker(point, item){
	//return  marker = new google.maps.Marker({
		//position: point,
		//map: map,
		//title: item.venue.name,
	//});
//}

//function gotMyCheckins(data){
	//var mydata = eval(data);
	//$.each(mydata, function(i,item){
		//placeMarker(map, item, buildSelfPopup(item), myMarker)
	//});
//}

//function loadMyTrips(){
	//$.getJSON("/getMyTrips/", gotMyCheckins);
//}

//function loadMyCheckins(feed){
	//$.getJSON("/getMyCheckins/?rss="+feed, gotMyCheckins);
//}

//function friendMarkers(point, item){
	//var image = new google.maps.MarkerImage(item.user.photo,
					//new google.maps.Size(85, 100))
	//return  marker = new google.maps.Marker({
		//position: point,
		//icon: image,
		//map: map,
		////shadow: shadow,
		//title: item.user.firstname + " " + item.user.lastname,
	//});
//}

//function doneLoading(){
	//set up the left panel some more
	//$(".siteinfo .thebody").hide();
	//$(".authorizedprofile .siteinfo ul")
		//.prepend("<li class='readbody'><a href='' title='expand'>Expand</a></li>");
	//$(".actions li.readbody a").click(function(event){
		//$(this).parents("ul").prev(".thebody").toggle();
		//event.preventDefault();
	//});

	//start ajax calls
	//$.getJSON("/getFriends/",
        //function(data){
			//a = eval("("+data+")");
			//a = eval(data);
          //$.each(a['checkins'], function(i,item){
				//placeMarker(map, item, buildfriendFoursquareCheckinPopup(item), friendMarkers)
			//});
            //$("<img/>").attr("src", item.media.m).appendTo("#images");
            //if ( i == 3 ) return false;
			//map.panTo(new GLatLng(minlon, minlat), 13);
	//});
	//$.getJSON("/getUser/",
		//function(data){
			//putStuffInProfilePane(data);
		//});
//}
$(document).ready(doneLoading);


</script>
<link rel="stylesheet" href="/site_media/style.css" type="text/css" media="screen"  charset="utf-8">
<!-- <script src="http://maps.google.com/maps?file=api&v=3&sensor=false&key=ABQIAAAAsYU_U_jVNoazWwWCRWxUmBS9bZigRblo2VqATPXK02zobVRVkhS3BtcPtFP8sXQ3yrRk35yzCld3EQ" type="text/javascript"></script> -->
    <script type="text/javascript">

	var map;
    function initialize() {
		var latlng = new google.maps.LatLng(-34.397, 150.644);
		var myOptions = {
			zoom: 8,
			center: latlng,
			mapTypeId: google.maps.MapTypeId.ROADMAP
		};
		map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    }

    </script>

</head>
<body onload="initialize()" onunload="google.maps.GUnload()">
<div class = "tabArea" border=1>
<div>
you are logged in as {{username}}
</div>
<div>
<a href="/addServices">Add services</a>
</div>
</div>
</div>

<div class="tabMain clearfix" color:#606060 background-color: #f4f2f3>
	<div class="logoArea">
	</div>
    <div class="profileinfo" width: 25%; height:100%; padding:0; float:left; border:2px solid #101010>
    	<div>
        <h2 >Profile Info for: </h2>
        </div>
        <div id="userinfo">
        </div>
		<div class='authorizedprofile'>
		{% for info in services %}
			<div class='siteinfo'
			<p class="summary">{{ info }} </p>
			<p class='thebody'>
			logo <br>
			You have a name and stuff<br>
			You have some profile status<br>
			</p>
			<ul class="actions">
       			<li><a href="">Remove</a></li>
     		</ul>
			</div>

		{% endfor %}
		</div>
    </div>

    <div class =mapcontent id="map_canvas" width: 70%; height:100%; float:right;>
        This is where the map goes
    </div>
</div>
</body>
</html>
